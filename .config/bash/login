. ~/.config/shell/login

export HISTCONTROL="ignorespace:ignoredups:erasedups"
export HISTTIMEFORMAT="%Y-%m-%d %H:%M:%S: "
export HISTSIZE=10000
export HISTFILESIZE=20000
export HISTFILE="${XDG_DATA_HOME}/bash_history"

# Shell options - globbing
shopt -s histappend
shopt -s nocaseglob
shopt -s autocd
shopt -s cdspell
shopt -s extglob
shopt -s globstar
shopt -s dotglob
shopt -s direxpand
shopt -s nullglob           # Expand empty globs to empty string (failglob removed - conflicts)

# Shell options - history
shopt -s histverify
shopt -s lithist
shopt -s cmdhist

# Share history across tmux panes/sessions in real-time
# Uses bash-preexec's precmd_functions array to sync history
# NOTE: Requires bash-preexec framework (provided by bash-it or standalone)
# Install standalone: curl https://raw.githubusercontent.com/rcaloras/bash-preexec/master/bash-preexec.sh -o ~/.config/bash/bash-preexec.sh
# Then add: [[ -f ~/.config/bash/bash-preexec.sh ]] && . ~/.config/bash/bash-preexec.sh
_share_history() {
    history -a;  # Append current session's commands to history file
    history -c;  # Clear in-memory history
    history -r;  # Reload history file (now contains all panes' commands)
}
precmd_functions+=(_share_history)

# Shell options - other
shopt -s checkwinsize
shopt -s lastpipe           # Last pipe command in current shell
shopt -s progcomp_alias     # Enable completion for aliases
shopt -s no_empty_cmd_completion  # Don't complete empty commands
shopt -s shift_verbose      # Warn if shift exceeds arguments

# Set options
complete -cf doas
set -o noclobber
set -o pipefail             # Return failure status from pipelines
# set -o ignoreeof          # If you want Ctrl+D protection


# vim:ft=sh
