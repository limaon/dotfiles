# MPV Configuration - Generic and compatible across different systems
# This configuration should work on any machine without errors or warnings

# General Settings #
hwdec=auto-safe
# Fallback to software decoding if hardware acceleration fails
hwdec-codecs=hevc,h264,vp9,vp8
input-media-keys=yes
prefetch-playlist=yes
player-operation-mode=pseudo-gui
save-position-on-quit=yes
# Use XDG cache directory (creates if doesn't exist)
watch-later-directory="${XDG_CACHE_HOME:-$HOME/.cache}/mpv/watch-later/"

# Video Filters (safe defaults) #
interpolation=no
deinterlace=no
dither-depth=auto
deband=no

# Screenshot Settings #
screenshot-format=png
screenshot-high-bit-depth=yes
screenshot-tag-colorspace=yes
screenshot-png-compression=3
screenshot-jpeg-quality=95
# Use XDG Pictures directory (creates if doesn't exist)
screenshot-directory="${XDG_PICTURES_DIR:-$HOME/Pictures}/"
screenshot-template="mpv-%f-%wH.%wM.%wS.%wT-#%#00n"

# UI Settings #
border=yes
msg-color=yes
msg-module=yes
term-osd-bar=yes
force-window=immediate
cursor-autohide-fs-only
cursor-autohide=1000
geometry=50%
keep-open=no

# OSD / OSC Settings #
title=${media-title} [${time-pos}${!duration==0: / ${duration}}] â€¢ ${mpv-version}
osd-duration=5000
osd-status-msg='${time-pos} / ${duration}${?percent-pos: (${percent-pos}%)}${?frame-drop-count:${!frame-drop-count==0: Dropped: ${frame-drop-count}}}\n${?chapter:Chapter: ${chapter}}'
osd-font="DejaVu Sans, Liberation Sans, Arial, Helvetica, sans-serif"
osd-border-size=2
osd-bar-h=2
osd-bar-w=60
osc=yes

# Colorspace Settings (safe defaults) #
icc-profile-auto=yes
target-prim=auto
target-trc=auto
video-output-levels=full
hdr-compute-peak=auto
tone-mapping=mobius

# Audio Settings (auto-detect audio system) #
# Auto-detect: tries pulse, pipewire, alsa, sdl, etc.
ao=auto
audio-file-auto=fuzzy
audio-pitch-correction=yes
volume-max=100
volume=100
# Only add audio filters if available (commented out to avoid errors)
# af-add='dynaudnorm=g=5:f=250:r=0.9:p=0.5'
# af-add=scaletempo2

# Language Preferences #
alang=ja,jp,jpn,japanese,en,eng,english,English,enUS,en-US,pt,pt-BR
slang=ja,jp,jpn,japanese,en,eng,english,English,enUS,en-US,pt,pt-BR

# Subtitle Settings #
demuxer-mkv-subtitle-preroll=yes
demuxer-mkv-subtitle-preroll-secs=500
sub-auto=fuzzy
sub-file-paths=ass:srt:sub:subs:subtitles

# Subtitle Appearance (with font fallback) #
# Supports CJK (Chinese, Japanese, Korean) and Latin characters
sub-font="Noto Sans CJK JP, Noto Sans CJK SC, Noto Sans CJK TC, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans-serif"
sub-font-size=40
sub-color="#FFFF00"
sub-border-size=2
sub-ass-override=yes
sub-ass-justify=yes
sub-filter-sdh=yes
sub-spacing=0.8

# YouTube-DL / yt-dlp Settings #
ytdl-raw-options=sub-lang="pt-BR,en-orig,en,pt,ja",write-sub=,write-auto-sub=,ignore-errors=
ytdl-format="bestvideo[height<=?1080]+bestaudio/best[height<=?1080]"

# Protocol: File (local files) #
[protocol.file]
network-timeout=0
force-window=yes
cache=yes
demuxer-max-bytes=300M
demuxer-max-back-bytes=100M
demuxer-readahead-secs=300
force-seekable=yes

# Protocol: Network (generic network) #
[protocol-network]
network-timeout=10
force-window=immediate
cache=yes
demuxer-max-bytes=300M
demuxer-readahead-secs=300

# Protocol: HTTP #
[protocol.http]
hls-bitrate=max
cache=yes
no-cache-pause
user-agent='Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36'

# Protocol: HTTPS #
[protocol.https]
hls-bitrate=max
cache=yes
no-cache-pause
user-agent='Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36'
speed=1
keep-open=no

# Protocol: YouTube-DL #
[protocol.ytdl]
profile=protocol.http
cache=yes

# Cache Settings (safe defaults) #
demuxer-max-bytes=41943040
demuxer-max-back-bytes=41943040
cache-pause=no
cache-on-disk=yes
cache-dir="${XDG_CACHE_HOME:-$HOME/.cache}/mpv/"

# vim: ft=conf
